generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Carga {
  id               String   @id @default(uuid())
  viagem           String   @unique
  origem           String
  destino          String
  data             String
  tonelagem        String
  tipo             String
  empresa          String
  status           String   @default("ACTIVE")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  lastScrapedAt    DateTime @default(now())
  notificationSent Boolean  @default(false)

  @@index([status])
  @@index([viagem])
}

model ScraperLog {
  id          String   @id @default(uuid())
  level       String
  message     String
  context     String?
  error       String?
  executionId String?
  timestamp   DateTime @default(now())
}

model PageView {
  id        String   @id @default(uuid())
  page      String
  sessionId String?
  userAgent String?
  timestamp DateTime @default(now())

  @@index([page, timestamp])
  @@index([timestamp])
}
